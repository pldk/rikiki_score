<%= turbo_frame_tag "prediction_#{round.id}_#{player.id}" do %>
  <div class="p-3 rounded-lg transition-colors duration-300 <%= bg_class(prediction) %> hover:shadow-sm text-center">

    <% if prediction.present? && prediction.actual_tricks.present? %>
      <!-- Actual tricks remplis -->
      <div class="flex justify-center items-center space-x-2 text-sm font-semibold text-gray-900 dark:text-gray-100">
        <span>üèπ <%= prediction.predicted_tricks %></span>
        <span>üéØ <%= prediction.actual_tricks %></span>
        <span><%= prediction.score&.cumulative_value || "-" %></span>

        <% if prediction.is_star? %>
          <% if prediction.actual_tricks == prediction.predicted_tricks %>
            <span class="text-green-500" title="Star r√©ussie">‚òÖ</span>
          <% else %>
            <span class="text-red-500" title="Star rat√©e">‚òÖ</span>
          <% end %>
        <% elsif prediction.actual_tricks != prediction.predicted_tricks %>
          <span class="ml-1 text-red-500 font-bold">‚Ä¢</span>
        <% end %>
      </div>

    <% elsif prediction.present? %>
      <!-- Formulaire pour remplir actual_tricks -->
      <div class="flex justify-center">
        <%= render "predictions/form_actual", prediction: prediction, game: game %>
      </div>

    <% else %>
      <!-- Formulaire pour nouvelle pr√©diction -->
      <div class="flex justify-center">
        <%= render "predictions/form_predicted", round: round, player: player, game: game, prediction: Prediction.new %>
      </div>
    <% end %>
    
  </div>
<% end %>
